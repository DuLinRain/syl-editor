# 编辑器搭建

## 一、实验介绍

### 1.1 实验内容

经过上一个实验的讲解，大家对整个编辑器项目的大体结构有了一定的了解，主要分为菜单栏和编辑区。菜单栏包括了编辑器的主要文本操作功能，且菜单项是可配置的。编辑器界面显示比较简单，是一个可编辑的 div 区域。本次实验的主要内容是将编辑器的整体框架搭建起来，可以在界面上展示，确保后续实验的顺利进行。

### 1.2 实验知识点

* 编辑器主要框架搭建

### 1.3 实验环境
+ 实验楼在线编程环境
+ sublime
+ 新版firefox


## 二、整合菜单

因为整个项目是基于 Vue.js 框架开发，所以，我们应该尽量以组件化的思想来开发项目。前面的实验中提到过，网页可以看作是一个巨大的组件，他也是由其他的小组件组合而成。同理，对于一个编辑器来说，也可以简单分为菜单栏和编辑区两个组件。同时，由于菜单栏包含了很多菜单项，所以每一个菜单项又可以看作是一个小组件。现在我们要做的就是将这些小组件整合到菜单栏中，然后再将菜单栏整合到编辑器中。

首先，在 `components` 目录下，新建两个目录，分别是 `content` 目录，存放编辑区相关组件；和 `menu` 目录，采访菜单相关组件。然后在 `menu` 目录下新建一个文件 `menubar.vue` ，这就是菜单栏组件，菜单项将要被整合到这个组件里。

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid108299labid3421timestamp1502186151105.png/wm)

因为 vue 文件的一般形式可以分为模版部分， js 代码部分，以及 css 部分。我将分步骤主要讲解模版部分和 js 代码部分。

### 2.1 模版编写

先贴出代码，再做详细解释：

```html
<template>
  <div class="syl-editor-menubar" id="syl-editor-menubar">
      <div v-for=" menu in viewMenu" :key="menu" class="menubar-item">
          <a href="javascript:;"
            :class="[ stated[menu].status , menus[menu].className ]"
            @click.stop="handleEvent($event, menu)"
            :title="lang[menu].title"
          >
          <span>
              <i :class="menus[menu].icon" aria-hidden="true"></i>
          </span>
          <span v-if="menus[menu].dropList">
            <i :class="['drop-list-icon', stated[menu].showDropList ? 'fa fa-angle-up' : 'fa fa-angle-down' ]" aria-hidden="true"></i>
          </span>
          </a>
        </div>
  </div>
</template>

```

首先是模版外层的代码，这是通用写法，以 `<template></template>` 标签表示这是模版部分。

这里的数据对象有四个：menus，全部菜单项配置；viewMenus ，可见的菜单项；stated，store 中的数据源；lang，菜单的语言集。

因为之前配置了很多菜单项，包括 className，action，以及 icon 等。同时，我们在编辑器全局配置中，配置了 viewMenu 选项，即可见的菜单。所以使用 `v-for` 循环取出菜单项的时候，应该从 viewMenu 中读取。

在配置文件中，对菜单的配置项是静态的，不可改变。同时，在 vuex 的 store 中，我们还针对各个菜单项的状态做了动态管理，状态值随时可以更改，主要是 active状态或者是否展示下拉框状态。所以，处理菜单项是，既要读取基础属性，也要读取 store 中状态值。

```html
<a href="javascript:;"
   //读取状态，类名
   :class="[ stated[menu].status , menus[menu].className ]"
   //点击事件处理
   @click.stop="handleEvent($event, menu)"
   //文字描述
   :title="lang[menu].title"
>
```

还有一个细节，当菜单项包含了下拉框时，需要展示一个折叠的箭头：

```html
<span v-if="menus[menu].dropList">
  <i :class="['drop-list-icon', stated[menu].showDropList ? 'fa fa-angle-up' : 'fa fa-angle-down' ]" aria-hidden="true"></i>
</span>
```



项目中使用的图标来自于 fontawesome，因为它的资源较多且大部分都是免费的。后面会介绍如何引用到项目。



## 三、配置编辑区

## 四、实验总结

